<ion-content class="ion-padding container" fullscreen="true">
  <ion-card class="login-card">
    <ion-card-header>
      <ion-card-title class="title">SurveyEngine</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <img src="https://cdn-icons-png.flaticon.com/512/6073/6073873.png" alt="User Icon" class="login-logo">
      <p class="text">Si no tienes una cuenta</p>
      <p>
        Tú puedes
        <a (click)="navigateToRegister()" class="register-link">Regístrate ahora!</a>
      </p>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="form">
        <!-- Correo -->
        <ion-label for="correo" color="dark">Correo</ion-label>
        <ion-item lines="full">
          <span slot="start" class="input-icon">
            <svg width="18" height="13" viewBox="0 0 17 13" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.49414 0.676514H15.5059C16.3297 0.676514 17 1.34679 17 2.17065V10.8294C17 11.6533 16.3297 12.3236 15.5059 12.3236H1.49414C0.670271 12.3236 0 11.6533 0 10.8294V2.17065C0 1.34679 0.670271 0.676514 1.49414 0.676514ZM1.68914 1.67261L1.88856 1.83866L7.90719 6.85037C8.25071 7.13638 8.74936 7.13638 9.09281 6.85037L15.1114 1.83866L15.3109 1.67261H1.68914ZM16.0039 2.17065L9.09281 7.85037C8.74936 8.13638 8.25071 8.13638 7.90719 7.85037L1.00391 2.17065V10.8294H16.0039V2.17065Z" fill="black"/>
            </svg>
          </span>
          <ion-input formControlName="correo" id="correo" type="correo" placeholder="Ingrese su correo" class="input-style"></ion-input>
        </ion-item>

        <!-- Contraseña -->
        <ion-label for="password" color="dark">Contraseña</ion-label>
        <ion-item lines="full">
          <span slot="start" class="input-icon">
            <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.0032 7.2296V4.53742C13.0104 3.31927 12.5239 2.14798 11.6553 1.29383C10.8156 0.457706 9.71638 0 8.5523 0C8.53428 0 8.51265 0 8.49463 0C6.01149 0.00360399 3.99325 2.03625 3.99325 4.53742V7.2296C3.05622 7.34132 2.37146 8.12699 2.37146 9.07844V15.1259C2.37146 16.1531 3.19317 17 4.2203 17H12.7798C13.8069 17 14.6286 16.1531 14.6286 15.1259V9.07844C14.625 8.12699 13.9398 7.34132 13.0032 7.2296ZM8.49818 12.8302C8.17743 12.8302 7.91794 12.5707 7.91794 12.2536C7.91794 11.9365 8.17743 11.677 8.49818 11.677C8.81893 11.677 9.07843 11.9365 9.07843 12.2536C9.07843 12.5707 8.81893 12.8302 8.49818 12.8302ZM10.7798 7.2296H6.2203V4.53742C6.2203 3.31927 7.10605 2.29383 8.2203 2.29383C9.33455 2.29383 10.2203 3.31927 10.2203 4.53742V7.2296H10.7798Z" fill="black"/>
            </svg>
          </span>
          <ion-input type="password" formControlName="password" id="password" placeholder="Ingrese su contraseña" class="input-style">
            <ion-input-password-toggle slot="end"></ion-input-password-toggle>
          </ion-input>
        </ion-item>

        <div class="recuperar-contrasena">
          <button type="button" (click)="navigateToRecovery()">Recuperar contraseña</button>
        </div>

        <!-- Botón de iniciar sesión -->
        <ion-button type="submit" expand="block" class="login-button">Inicia Sesión</ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Alertas -->
  <ion-alert
    *ngIf="loadingAlertVisible"
    header="Cargando..."
    message="Estamos procesando tu solicitud"
    [buttons]="[]"
    [isOpen]="loadingAlertVisible">
  </ion-alert>

  <ion-alert
    *ngIf="successAlertVisible"
    header="¡Bienvenido!"
    message="Has iniciado sesión correctamente."
    [buttons]="['Aceptar']"
    [isOpen]="successAlertVisible"
    (didDismiss)="successAlertVisible = false">
  </ion-alert>

  <ion-alert
    *ngIf="wrongPasswordAlertVisible"
    header="Error de autenticación"
    message="Contraseña incorrecta, vuelva a intentarlo"
    [buttons]="['Aceptar']"
    [isOpen]="wrongPasswordAlertVisible"
    (didDismiss)="wrongPasswordAlertVisible = false">
  </ion-alert>

  <ion-alert
    *ngIf="errorAlertVisible"
    header="Error"
    message="Hubo un problema al iniciar sesión, por favor intenta nuevamente."
    [buttons]="['Aceptar']"
    [isOpen]="errorAlertVisible"
    (didDismiss)="errorAlertVisible = false">
  </ion-alert>
</ion-content>